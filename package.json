<script>
let currentIndex = 0;
const slides = document.querySelectorAll(".carousel img");
const dots = document.querySelectorAll(".dot");
const carousel = document.querySelector(".carousel");

// 設定 carousel 寬度（依照圖片數自動調整）
carousel.style.width = `${slides.length * 100}%`;

// 顯示指定 index 的圖片
function showSlide(index) {
  const offset = index * (100 / slides.length);
  carousel.style.transform = `translateX(-${offset}%)`;

  // 更新 dot 樣式
  dots.forEach(dot => dot.classList.remove("active"));
  dots[index].classList.add("active");
}

// 自動播放
let autoSlide = setInterval(() => {
  currentIndex = (currentIndex + 1) % slides.length;
  showSlide(currentIndex);
}, 4000);

// 點擊 dot 手動切換
dots.forEach((dot, i) => {
  dot.addEventListener("click", () => {
    currentIndex = i;
    showSlide(currentIndex);
    resetAutoSlide();
  });
});

// 手動操作後重置自動播放
function resetAutoSlide() {
  clearInterval(autoSlide);
  autoSlide = setInterval(() => {
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
  }, 4000);
}

// 初始化顯示第一張圖
showSlide(currentIndex);

// ✅ 卡片翻轉效果（只保留一個版本）
window.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".flip-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const card = btn.closest(".product-card");
      card.classList.toggle("flipped");
    });
  });
});
</script>